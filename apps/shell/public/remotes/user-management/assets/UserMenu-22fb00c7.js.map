{"version":3,"file":"UserMenu-22fb00c7.js","sources":["../../../../../user-management/src/components/UserMenu.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { onMounted, ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { authService, DataSource, GetImageUrl, routingService } from 'utility'\r\nimport { GetUserInformationQueryDTOCoreResponse } from '../users'\r\nimport { translationService, settingsService } from 'utility'\r\n\r\nconst t = translationService.translate\r\nconst router = useRouter();\r\nconst displayName = ref(\"\")\r\nconst userRoles = ref<string[]>([])\r\n\r\nconst userMenuExpanded = ref(false)\r\n\r\nconst userInformationDataSource = new DataSource<{}, {}, null, GetUserInformationQueryDTOCoreResponse>({\r\n  name: \"userInformation\",\r\n  method: \"GET\"\r\n});\r\n\r\n// userInformationDataSource.getQueryParams = () => (\r\n// {\r\n//   Username: authService.username.value ?? undefined\r\n// });\r\n\r\nfunction toggleUserMenu() {\r\n  userMenuExpanded.value = !userMenuExpanded.value\r\n}\r\n\r\nfunction closeUserMenu() {\r\n  userMenuExpanded.value = false\r\n}\r\n\r\nfunction goToSettings() {\r\n  closeUserMenu()\r\n  router.push('/profile')\r\n  console.log(router)\r\n}\r\n  \r\nasync function retrieveUserInformation() {\r\n  let res = await userInformationDataSource.retrieveData((data) => {\r\n    settingsService.setUserSettings(data.data?.languageId, data.data?.dateTimeFormatId, data.data?.decimalSeperatorId);\r\n  });\r\n  if(res) {\r\n    displayName.value = res.data?.displayName ?? res.data?.username ?? \"\";\r\n    userRoles.value = res.data?.roleNames ?? [];\r\n  }\r\n\r\n}\r\nonMounted(async () => {\r\n\r\n  if(!authService.currentUser.value)\r\n    authService.onLoaded(async () => {\r\n      await retrieveUserInformation();\r\n    })\r\n  else {\r\n    await retrieveUserInformation();\r\n  }\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div class=\"userMenu\" @click=\"toggleUserMenu\">\r\n    <div class=\"userSummary\">\r\n      <img :src=\"GetImageUrl('userIcon.png')\" style=\"width: 35px;\" />\r\n      <div class=\"userText\">\r\n        <div class=\"userName\">{{ displayName }}</div>\r\n        <div class=\"userRoles\">{{ userRoles?.join(', ') }}</div>\r\n      </div>\r\n      <i\r\n        class=\"fa-solid fa-chevron-down caretIcon\"\r\n        :class=\"{ rotated: userMenuExpanded }\"\r\n      ></i>\r\n    </div>\r\n\r\n    <div v-if=\"userMenuExpanded\" class=\"userMenuDropdown\" @click.stop>\r\n      <button @click=\"goToSettings\">\r\n        <i class=\"fa-solid fa-user\"></i>\r\n        {{ t('s:mySettings') }}\r\n      </button>\r\n\r\n      <button @click=\"authService.logout()\">\r\n        <i class=\"fa-solid fa-right-from-bracket\"></i>\r\n       {{ t('s:signOut') }}\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.userMenu {\r\n  position: relative;\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\n\r\n.userSummary {\r\n  display: flex;\r\n  min-width: 220px;\r\n  align-items: center;\r\n  padding: 0px 10px;\r\n  border-radius: 4px;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.userText {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  flex: 1;\r\n}\r\n\r\n.userName {\r\n  font-weight: 500;\r\n}\r\n\r\n.userRoles {\r\n  font-size: 12px;\r\n  font-weight: 300;\r\n}\r\n\r\n.caretIcon {\r\n  margin-left: 8px;\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\n.caretIcon.rotated {\r\n  transform: rotate(180deg);\r\n}\r\n\r\n.userMenuDropdown {\r\n  z-index: 1001;\r\n  position: absolute;\r\n  right: 0;\r\n  top: 100%;\r\n  min-width: 220px;\r\n  margin-top: 5px;\r\n  background-color: white;\r\n  border-radius: 4px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  padding: 0px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.userMenuDropdown button {\r\n  background-color: transparent;\r\n  border: none;\r\n  text-align: left;\r\n  padding: 6px 10px;\r\n  color: black;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s ease;\r\n  width: 100%;\r\n}\r\n\r\n.userMenuDropdown button:hover {\r\n  background-color: var(--primaryColorDark);\r\n  color: white;\r\n}\r\n\r\n.userMenuDropdown button i {\r\n  margin-right: 8px;\r\n}\r\n</style>\r\n"],"names":["useRouter","ref","onMounted"],"mappings":";;;;;;;;;;;;;;;;;AAOA,IAAA,MAAM,IAAI,kBAAmB,CAAA,SAAA,CAAA;AAC7B,IAAA,MAAM,SAASA,uEAAU,EAAA,CAAA;AACzB,IAAM,MAAA,WAAA,GAAcC,sDAAI,EAAE,CAAA,CAAA;AAC1B,IAAM,MAAA,SAAA,GAAYA,qDAAc,CAAA,EAAE,CAAA,CAAA;AAElC,IAAM,MAAA,gBAAA,GAAmBA,sDAAI,KAAK,CAAA,CAAA;AAElC,IAAM,MAAA,yBAAA,GAA4B,IAAI,UAAiE,CAAA;AAAA,MACrG,IAAM,EAAA,iBAAA;AAAA,MACN,MAAQ,EAAA,KAAA;AAAA,KACT,CAAA,CAAA;AAOD,IAAA,SAAS,cAAiB,GAAA;AACxB,MAAiB,gBAAA,CAAA,KAAA,GAAQ,CAAC,gBAAiB,CAAA,KAAA,CAAA;AAAA,KAC7C;AAEA,IAAA,SAAS,aAAgB,GAAA;AACvB,MAAA,gBAAA,CAAiB,KAAQ,GAAA,KAAA,CAAA;AAAA,KAC3B;AAEA,IAAA,SAAS,YAAe,GAAA;AACtB,MAAc,aAAA,EAAA,CAAA;AACd,MAAA,MAAA,CAAO,KAAK,UAAU,CAAA,CAAA;AACtB,MAAA,OAAA,CAAQ,IAAI,MAAM,CAAA,CAAA;AAAA,KACpB;AAEA,IAAA,eAAe,uBAA0B,GAAA;AACvC,MAAA,IAAI,GAAM,GAAA,MAAM,yBAA0B,CAAA,YAAA,CAAa,CAAC,IAAS,KAAA;AAC/D,QAAgB,eAAA,CAAA,eAAA,CAAgB,KAAK,IAAM,EAAA,UAAA,EAAY,KAAK,IAAM,EAAA,gBAAA,EAAkB,IAAK,CAAA,IAAA,EAAM,kBAAkB,CAAA,CAAA;AAAA,OAClH,CAAA,CAAA;AACD,MAAA,IAAG,GAAK,EAAA;AACN,QAAA,WAAA,CAAY,QAAQ,GAAI,CAAA,IAAA,EAAM,WAAe,IAAA,GAAA,CAAI,MAAM,QAAY,IAAA,EAAA,CAAA;AACnE,QAAA,SAAA,CAAU,KAAQ,GAAA,GAAA,CAAI,IAAM,EAAA,SAAA,IAAa,EAAC,CAAA;AAAA,OAC5C;AAAA,KAEF;AACA,IAAAC,2DAAA,CAAU,YAAY;AAEpB,MAAG,IAAA,CAAC,YAAY,WAAY,CAAA,KAAA;AAC1B,QAAA,WAAA,CAAY,SAAS,YAAY;AAC/B,UAAA,MAAM,uBAAwB,EAAA,CAAA;AAAA,SAC/B,CAAA,CAAA;AAAA,WACE;AACH,QAAA,MAAM,uBAAwB,EAAA,CAAA;AAAA,OAChC;AAAA,KACD,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}